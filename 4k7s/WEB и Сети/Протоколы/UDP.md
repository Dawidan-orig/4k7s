Берём два порта, считаем контрольную сумму, и отправляем пакет.

Контрольная сумма - это нумерация пакетов, благодаря которой можно повторно запросить потерянные пакеты.

Впрочем, если пакет потерялся - то он просто забывается.

Как и TCP используют порты оба.